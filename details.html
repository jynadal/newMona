<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="styles.css" />
    <!-- Boxicons -->
    <link
      href="https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css"
      rel="stylesheet"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
     integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer" />

        <!-- CDN Contentful -->
    <script src="https://cdn.jsdelivr.net/npm/contentful@latest/dist/contentful.browser.min.js"></script>
    <script>
      var exports = {}; // quick fix because 'exports' is not defined in rich-text bundle below
    </script>
    <script
      src="https://unpkg.com/@contentful/rich-text-html-renderer@12.0.0/dist/rich-text-html-renderer.es5.js"
      charset="utf-8"
      main.js
    ></script>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>


    <title>Mon Agence</title>
  </head>
  <body>
    <header>
      <div class="icons">
          <div class="nav-icons">
                <a href="/#/contact">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                   style="fill: white; transform: ; msfilter: "
                >
                  <path
                    d="M7.5 6.5C7.5 8.981 9.519 11 12 11s4.5-2.019 4.5-4.5S14.481 2 12 2 7.5 4.019 7.5 6.5zM20 21h1v-1c0-3.859-3.141-7-7-7h-4c-3.86 0-7 3.141-7 7v1h17z"
                  ></path>
                </svg>
              </a>

              <a href="/#/phone"></a>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                   style="fill: white; transform: ; msfilter: "
                  
                >
                  <path
                    d="m20.487 17.14-4.065-3.696a1.001 1.001 0 0 0-1.391.043l-2.393 2.461c-.576-.11-1.734-.471-2.926-1.66-1.192-1.193-1.553-2.354-1.66-2.926l2.459-2.394a1 1 0 0 0 .043-1.391L6.859 3.513a1 1 0 0 0-1.391-.087l-2.17 1.861a1 1 0 0 0-.29.649c-.015.25-.301 6.172 4.291 10.766C11.305 20.707 16.323 21 17.705 21c.202 0 .326-.006.359-.008a.992.992 0 0 0 .648-.291l1.86-2.171a.997.997 0 0 0-.085-1.39z"
                  ></path>
                </svg>
              </a>
            </div>

      </div>
      <input type="checkbox" id="nav-toggle" class="nav-toggle" />
      <nav>
        <ul>
          <li class="li"><a href="flash.html">Vente Flash</a></li>
          <li><a href="promotion.html">Promotion</a></li>
          <li><a href="all_include.html">All IN</a></li>
          <li><a href="last_minute.html">Dernières Minutes</a></li>
          </ul>
      </nav>
      <label for="nav-toggle" class="nav-toggle-label">
        <span></span>
      </label>
    </header>
    <section id="logo">
        <div class="logo big-logo">
            <a href="/#/home" class="logo">
                <img src="./images/logo_monagence.png" alt="logo-big" />
            </a>
        </div>
         <div class="logo small-logo">
            <a href="/#/home" class="logo">
                <img src="./images/logoMonAgenceMb.png" alt="logo" />
            </a>
        </div>
    </section>
    <!-- Main Beggin -->
    <main>
        <!-- Detail Container -->
          <div  id="detail" class="detail-container">

            <div id="h1">
            
            </div>

            <div class="content">
            <!-- <style>
                .slider {
                width: 500px;
                overflow: hidden;
                }
                .slides {
                    width: calc(500px * 4);
                    animation: glisse 10s infinite;
                }
                .img__slider {
                    float: left;
                    }

                @keyframes glisse {
                    0% {
                    transform: translateX(0);
                    }
                    25% {
                    transform: translateX(-500px);
                    }
                    50% {
                    transform: translateX(-1000px);
                    }
                    75% {
                    transform: translateX(-1500px);
                    }
                    100% {
                    transform: translateX(0px);
                    }
                }
                </style> -->
            <div id="image" class="image"></div>

              <!-- <div id="slider" class="slider"> -->
                <!-- <div class="slides"> 
                    <img src="{+slider1+}" alt="slider1" class="img__slider active"/>
                    <img src="images/vacances-en-famille.jpg " alt="slider2" class="img__slider"/>
                    <img src="images/promotion-de-voyages.jpg " alt="slider3" class="img__slider"/>
                    <div class="suivant">
                    <i class="fa-solid fa-circle-chevron-right"></i>
                    <i class="fa-solid fa-angle-right"></i>
                    </div>
                    <div class="precedent">
                    <i class="fa-solid fa-circle-chevron-left"></i>
                    <i class="fa-solid fa-angle-left"></i>
                    </div>
                </div> -->
              <!-- </div> -->

              <div id="description">
            
              </div>
            </div>  
            <div id="galerie">
            </div>

          </div>
       
        <div id="promos" class="price-promo">
        
        </div>

        <section class="infos"> 
      Besoin de plus d'information !
      <br />
      Contactez-nous: 01 73 323 323
      </section>
    </main>

    <!-- Main End -->

    <footer id="footer">
        <div class="footer-container">
          <ul>
            <li>
              <a
                href="https://www.facebook.com/Monagence"
                class="fab icon-facebook"
                target="_blank"
                aria-label="Facebook"
                rel="noopener noreferrer"
              >
                <img src="./images/icons/icons8-facebook.svg" alt="">
              </a>
            </li>
            <li>
              <a
                href="https://www.instagram.com/monagencedevoyages/?hl=fr"
                class="fab icon-instagram"
                target="_blank"
                aria-label="Instagram"
                rel="noopener noreferrer"
              >
                 <img src="./images/icons/icons8-instagram.svg" alt="">
              </a>
            </li>
            <li>
              <a
                href="https://twitter.com/MonAgence"
                class="fab icon-twitter"
                target="_blank"
                aria-label="Twitter"
                rel="noopener noreferrer"
              >
                <img src="./images/icons/icons8-twitter.svg" alt="">

              </a>
            </li>
            <li>
              <a
                href="https://www.youtube.com/user/monagence1"
                class="fab icon-youtube"
                target="_blank"
                aria-label="Youtube"
                rel="noopener noreferrer"
              >
                <img src="./images/icons/icons8-lecture-de-youtube.svg" alt="">

              </a>
            </li>
          </ul>
        </div>

          <div class="footer-copyright">
           <p>
                <!-- La vente de voyages sous la marque Monagence.com est assurée par
              SARL  -->
              RF Distribution au capital de 100 000 euros. Garantie
              financière APST IM094120019 / R.C GENERALI N° AL813861 / LI
              094090006 : Siège : 2 rue du Nouveau Bercy 94220 Charenton-le-Pont
              <!-- <br /> Hébergement du site : CLARANET 68 rue du Faubourg Saint
              Honoré - 75008 PARIS - ©2021 Monagence.com tous droits réservés -->
            </p>
          </div>
    </footer>
    <script>
    //   var titleOffre = window.location.search;
    //   alert(titleOffre.replace(/[^\w-]+/g,''))
    //   alert(titleOffre)

      const url = new URL(window.location.href)
      category=url.searchParams.get("cat")
      entry_id=url.searchParams.get("id")
      console.log(category);
 

    // Contentful
    var client = contentful.createClient({
  space: '7ws762hxf367',
  accessToken:'gdawe9nwkgsiG3pphCP77Gxyq5QLuQY5H3eHt_PIY5Q',
});

// client.getEntries({
//  content_type: titleOffre
// }).then(response => console.log(response.items));

// client.getEntry('entry_id').then(function (entry) {
// })

client
  .getEntries({
    content_type: 'voyages',
    'fields.id':entry_id,
    // 'sea_lagon_le_printemps_gueliz',
  })
  .then(function (entries) {
    entries.items.forEach(function(entry) {

    var category = entry.fields.categorie;

    console.log(JSON.stringify(entry.fields.title));
      console.log(entry.fields)
      var title = entry.fields.title;
      var titre2 = entry.fields.titre2;
      var description = entry.fields.description;
      var category = entry.fields.category;
      var avantage1 = entry.fields.avantage1;

      var prixAvecPromos = entry.fields.prixAvecPromos;
      var promotion = entry.fields.promotion;
      var prixAvant = entry.fields.prixAvant;
      var disponibilite = entry.fields.disponibilite;
        
        var slider1 = entry.fields.sliderImage1.fields.file.url;
        var slider2 = entry.fields.sliderImage2.fields.file.url;
        var slider3 = entry.fields.sliderImage3.fields.file.url;
        var slider4 = entry.fields.sliderImage4.fields.file.url;
        //.fields.file.url;
      console.log(slider1)
       console.log(slider4)

    //     function convertToSlug(Text) {
    //     return Text
    //         .toLowerCase()
    //         .replace(/ /g,'_')
    //         .replace(/[^\w-]+/g,'')
    //         ;
    //   }

//       // function getParameterByName(nama) {
//       //   name = name.replace(/[[]/, [).replace(/[]]/, ]);
//       //   var regexS = [?&] + name + =([^&#]*);
//       //   var regex = new RegExp(regexS);
//       //   var results = regex.exec(window.location.search);
//       //   if (results == null)
//       //   return ;
//       //   else
//       //   return decodeURIComponent(results[1].replace(/+/g, ));
//       // }

//       var url = window.location.search()
//       console.log(url)

//        var url2 = location.search()
//       console.log(url2)

//       // jQuery('#flash_container').append('<div class="card"><h5>'+title+'</h5></div>');
   // jQuery('#h1').append('<h1 class="h1">'+title+'</h1>');
    
    jQuery('#h1').append('<h1 class="h1">'+title+'</h1>');
    //jQuery('#slider').append('<img src='+slider1+' alt="slider"/><div class="img__slider ><img src='+slider2+' alt="slider"/><img src='+slider3+' alt="slider"/><img src='+slider4+' alt="slider"/>');
   // slider1 ? jQuery('#slider').append('<img src='+slider1+' alt="slider" class="img__slider active" /> <img src='+slider2+' alt="slider"  class="img__slider" /><img src='+slider3+' alt="slider" class="img__slider"/><img src='+slider4+' alt="slider" class="img__slider"/> <div class="suivant"><i class="fa-solid fa-circle-chevron-right"></i></div><div class="precedent"><i class="fa-solid fa-circle-chevron-left"></i></div>'):
    jQuery('#image').append('<img src='+slider1+' alt="slider" class="img__slider" />');

    jQuery('#galerie').append('<img src='+slider1+' alt="slider" class="img__slider active" /> <img src='+slider2+' alt="slider"  class="img__slider" /><img src='+slider3+' alt="slider" class="img__slider"/><img src='+slider4+' alt="slider" class="img__slider"/>')
    //jQuery('#slider').append('<div class="slides"><div class="img__slider" ><img src='+slider1+' alt="slider"/></div> <div class="img__slider ><img src='+slider2+' alt="slider"/></div> <div class="img__slider ><img src='+slider3+' alt="slider"/></div> <div class="img__slider ><img src='+slider4+' alt="slider"/></div></div>');
    jQuery('#description').append('<p class="descrip">Description</p><h3>'+title+'</h3><h4>'+titre2+'</h4><br /><p class="contenu">'+description+'</p><p class="categorie">'+category+'</p><p class="avantages">'+avantage1+'</p>');
    // <div class="suivant"><i class="fa-solid fa-circle-chevron-right"></i></div><div class="precedent"><i class="fa-solid fa-circle-chevron-left"></i></div>
    prixAvant ? jQuery('#promos').append('<div class="reduction"><s>'+prixAvant+' €</s><p>'+promotion+'</p></div><div class="price-resa"><p class="price">'+prixAvecPromos+' €</p><a href="'+disponibilite+'"><div class="resa"><p>Voir les disponibilités</p></div></a></div>')
     : 
    jQuery('#promos').append('<div class="reduction"><p>'+promotion+'</p></div><div class="price-resa"><p class="price">'+prixAvecPromos+'€</p><a href="'+disponibilite+'"><div class="resa"><p>Voir les disponibilités</p></div></a></div>')
    ;
//       // return documentToHtmlString( description);
    });
  });




//   // client
//   // .getEntries({
//   //   content_type: 'promotion',
//   //   // 'fields.slug[in]': 'promotion',
//   // })
//   // .then(function (entries) {
//   //   console.log(JSON.stringify(entries));
//   //   entries.items.forEach(function (entry) {
//   //     // console.log(JSON.stringify(entry.fields.categorie));
//   //   });
//   // });

//   client
//   .getEntries({
//     'fields.categorie[in]': 'promotion',
//   //   content_type: '<product_content_type_id>',
//   })
//   // .then(function (entries) {
//   //   entries.items.forEach(function (entry) {
//   //     console.log(JSON.stringify(entry));
//   //   });
//   // });


let img__slider = document.getElementsByClassName("img__slider");
console.log(img__slider)

let etape = 0;

let nbr_img = img__slider.length;

let precedent = document.querySelector(".precedent");
let suivant = document.querySelector(".suivant")

function enleverActiveImages() {
for(let i=0; i<nbr_img;  i++) {
    img__slider[i].classList.remove("active");
    }
}

suivant.addEventListener('click', function() {
    etape++;
    if (etape >= nbr_img) {
    etape = 0;
    }
    enleverActiveImages();
    img__slider[etape].classList.add("active");
})

precedent.addEventListener('click', function() {
    etape--;
    if (etape <0){
    etape=nbr_img-1;}
    enleverActiveImages();
    img__slider[etape].classList.add("active");
})

setInterval(function(){
 etape++;
    if (etape >= nbr_img) {
    etape = 0;
    }
    enleverActiveImages();
    img__slider[etape].classList.add("active");

}, 3000)

    </script>
  </body>
</html>
