<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="styles.css" />
    <!-- Boxicons -->
    <link
      href="https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css"
      rel="stylesheet"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- CDN Contentful -->
    <script src="https://cdn.jsdelivr.net/npm/contentful@latest/dist/contentful.browser.min.js"></script>
    <script>
      var exports = {}; // quick fix because 'exports' is not defined in rich-text bundle below
    </script>
    <script
      src="https://unpkg.com/@contentful/rich-text-html-renderer@12.0.0/dist/rich-text-html-renderer.es5.js"
      charset="utf-8"
    ></script>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>

    <title>Mon Agence</title>
  </head>
  <body>
    <header>
      <div class="icons">
          <div class="nav-icons">
                <a href="/#/contact">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  >
                  <!-- style="fill: white; transform: ; msfilter: " -->
                  <path
                    d="M7.5 6.5C7.5 8.981 9.519 11 12 11s4.5-2.019 4.5-4.5S14.481 2 12 2 7.5 4.019 7.5 6.5zM20 21h1v-1c0-3.859-3.141-7-7-7h-4c-3.86 0-7 3.141-7 7v1h17z"
                  ></path>
                </svg>
              </a>

              <a href="/#/phone"></a>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                >
                  <path
                    d="m20.487 17.14-4.065-3.696a1.001 1.001 0 0 0-1.391.043l-2.393 2.461c-.576-.11-1.734-.471-2.926-1.66-1.192-1.193-1.553-2.354-1.66-2.926l2.459-2.394a1 1 0 0 0 .043-1.391L6.859 3.513a1 1 0 0 0-1.391-.087l-2.17 1.861a1 1 0 0 0-.29.649c-.015.25-.301 6.172 4.291 10.766C11.305 20.707 16.323 21 17.705 21c.202 0 .326-.006.359-.008a.992.992 0 0 0 .648-.291l1.86-2.171a.997.997 0 0 0-.085-1.39z"
                  ></path>
                </svg>
              </a>
            </div>

      </div>
      <input type="checkbox" id="nav-toggle" class="nav-toggle" />
      <nav>
        <ul>
          <li class="li"><a href="flash.html">Vente Flash</a></li>
          <li><a href="last_minute.html">Dernière Minute</a></li>
          <li><a href="all_include.html">All Inclusive</a></li>
          <li><a href="promotion.html">Promotion</a></li>
        </ul>
      </nav>
      <label for="nav-toggle" class="nav-toggle-label">
        <span></span>
      </label>
    </header>
    <section id="logo">
        <div class="logo big-logo">
            <a href="/#/home" class="logo">
                <img src="./images/logo_monagence.png" alt="logo-big" />
            </a>
        </div>
         <div class="logo small-logo">
            <a href="/#/home" class="logo">
                <img src="./images/logoMonAgenceMb.png" alt="logo" />
            </a>
        </div>
    </section>
    <!-- Main Beggin -->
    <main>
        <div class="hero-container">
            <img src="images/voyages/beach.jpg" alt="home" />
        </div>

        <!-- All inclusive -->
        <div class="h2">
          <h2>Vente Flash</h2>
          <p>
            Ne revez plus, voyagez! Monagence c'est des ventes flash tous les
            jours,
          </p>
          <p>
            des offres tous compris à prix mini et des promotions exeptionnelles
          </p>
        </div>
        <!-- cards -->
          <div id="flash_container" class="card2-layout container">

          </div>

           <div id="last_minute" class="card2-layout container">

          </div>
          
       
        <section id="promotion-btn">
      
        </section>
    </main>
    <!-- Main End -->

    <footer id="footer">
        <div class="footer-container">
          <ul>
            <li>
              <a
                href="https://www.facebook.com/Monagence"
                class="fab icon-facebook"
                target="_blank"
                aria-label="Facebook"
                rel="noopener noreferrer"
              >
                <img src="./images/icons/icons8-facebook.svg" alt="">
              </a>
            </li>
            <li>
              <a
                href="https://www.instagram.com/monagencedevoyages/?hl=fr"
                class="fab icon-instagram"
                target="_blank"
                aria-label="Instagram"
                rel="noopener noreferrer"
              >
                 <img src="./images/icons/icons8-instagram.svg" alt="">
              </a>
            </li>
            <li>
              <a
                href="https://twitter.com/MonAgence"
                class="fab icon-twitter"
                target="_blank"
                aria-label="Twitter"
                rel="noopener noreferrer"
              >
                <img src="./images/icons/icons8-twitter.svg" alt="">

              </a>
            </li>
            <li>
              <a
                href="https://www.youtube.com/user/monagence1"
                class="fab icon-youtube"
                target="_blank"
                aria-label="Youtube"
                rel="noopener noreferrer"
              >
                <img src="./images/icons/icons8-lecture-de-youtube.svg" alt="">

              </a>
            </li>
          </ul>
        </div>

          <div class="footer-copyright">
            <p>
              <!-- La vente de voyages sous la marque Monagence.com est assurée par
              SARL  -->
              RF Distribution au capital de 100 000 euros. Garantie
              financière APST IM094120019 / R.C GENERALI N° AL813861 / LI
              094090006 : Siège : 2 rue du Nouveau Bercy 94220 Charenton-le-Pont
              <!-- <br /> Hébergement du site : CLARANET 68 rue du Faubourg Saint
              Honoré - 75008 PARIS - ©2021 Monagence.com tous droits réservés -->
            </p>
          </div>
    </footer>

<script>

 // Contentful
    var client = contentful.createClient({
  space: '7ws762hxf367',
  accessToken: 'gdawe9nwkgsiG3pphCP77Gxyq5QLuQY5H3eHt_PIY5Q',
});

function convertToSlug(Text) {
  return Text
      .toLowerCase()
      .replace(/ /g,'_')
      .replace(/[^\w-]+/g,'')
;
}
// flash
client
  .getEntries({
    content_type: 'voyages',
    'fields.categorie': 'flash',
  })
  .then(function (entries) {
    entries.items.forEach(function (entry) {
      var category = entry.fields.categorie;
      console.log(JSON.stringify(entry.fields.categorie));
    
      console.log(entry.fields)
      var title = entry.fields.title;
      var etoile = entry.fields.etoile;
      var prixAvecPromos = entry.fields.prixAvecPromos;
      var image = entry.fields.image.fields.file.url;
      console.log(etoile)


      // jQuery('#flash_container').append('<div class="card"><h5>'+title+'</h5></div>');
      jQuery('#flash_container').append('<div class="card"><div class="travelList"><a href="details.html?'+convertToSlug(title)+'"><img src='+image+' alt="flash"/><h5>'+title+'</h5><h5>'+etoile+'  <img class="star" src="https://img.icons8.com/fluency/20/000000/star.png"/></h5><p class="price">'+prixAvecPromos+' €</p><p class="voir_offre">Voir l\'offre</p></div></a></div>');
      
      // return documentToHtmlString( description);
    });
  });

  // client
  // .getEntries({
  //   content_type: 'voyages',
  //   'fields.categorie': 'last_minute',
  // })
  // .then(function (entries) {
  //   entries.items.forEach(function (entry) {
  //     var category = entry.fields.categorie;
  //     console.log(JSON.stringify(entry.fields.categorie));
    
  //     console.log(entry.fields)
  //     var title = entry.fields.title;
  //     var etoile = entry.fields.etoile;
  //     var prixAvecPromos = entry.fields.prixAvecPromos;
  //     var image = entry.fields.image.fields.file.url;
  //     console.log(etoile)


  //     // jQuery('#last_minute').append('<div class="card"><h5>'+title+'</h5></div>');
  //     jQuery('#last_minute').append('<div class="card"><div class="travelList"><a href="details.html?title='+convertToSlug(title)+'"><img src='+image+' alt="flash"/><h5>'+title+'</h5><h5>'+etoile+'  <img class="star" src="https://img.icons8.com/fluency/20/000000/star.png"/></h5><p class="price">'+prixAvecPromos+' €</p><p class="voir_offre">Voir l\'offre</p></div></a></div>');
      
  //   });
  // });

function cat(category) {
  if (category == flash) {
    return "flash"
  }
    if (category == last_minute) {
    return "last minute"
  }
  if (category == promotion) {
    return "promotion"
  }
    if (category == all_include) {
    return "all include"
  } else 
  return  "*"
}

 // promotion
    client
  .getEntries({
    content_type: 'voyages',
  })
  .then(function (entries) {
    entries.items.forEach(function (entry) {
      var category = entry.fields.categorie;
      console.log(JSON.stringify(entry.fields.categorie));
    
      console.log(entry.fields)

      // Btn Promotion
      jQuery('#promotion-btn').append('<a href="details.html?title='+convertToSlug(title)+'"><button class="promo">'+cat(category)+'</button></a>');
      // return documentToHtmlString( description);
    });
  });


    </script>
  </body>
</html>
